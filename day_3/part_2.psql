\include_relative parse.psql

with
  rucksacks_by_elf_group as (
    select
      array_agg(rucksack_items) as rucksacks
    from (
      select
        (row_number() over () - 1) / 3 as elf_group_number,
        rucksack_items
      from input
    ) as _
    group by elf_group_number
  )
  select sum(priority(find_common_item(rucksacks))) from rucksacks_by_elf_group;
